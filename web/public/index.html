<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Carolum</title>

    <link rel="shortcut icon" href="/ico/128.ico" type="image/x-icon">

    <script src="/dep/vue/vue.js"></script>
    <script src="/dep/argon2-browser/lib/argon2.js"></script>
    <link rel="stylesheet" href="/dep/tachyons/tachyons.min.css">

    <link rel="stylesheet" href="/css/index.css">

    <script type="text/x-template" id="modal-template">
        <transition name="modal">
            <div class="modal-mask">
                <div class="modal-wrapper" @click="$emit('close')">
                    <div class="modal-container w-75 h-75" @click.stop="">
                        <div class="modal-header flex justify-between f3">
                            <slot name="header">
                                
                            </slot>
                            <i class="fas fa-times pointer" @click="$emit('close')"></i>
                        </div>

                        <div class="modal-body">
                            <slot name="body">
                            </slot>
                        </div>

                        <div class="modal-footer">
                            <slot name="footer">
                            </slot>
                        </div>
                    </div>
                </div>
            </div>
        </transition>
    </script>
</head>
<body class="georgia vh-100">
    <div class="content ph2 pt5 pb3 mid-gray center pa0 ma0" style="height: 78vh;">
        <div id="new" class="h-100" v-if="display" v-cloak>
            <a @click="update()">save data</a>
            <input type="text" :placeholder="content.titlePlaceholder" :value="content.title" class="f1 ph3 pt1 pb2 w-100" onchange="newEntry.changeContent('title', this.value)">
            
            <div class="userinput pt2">
                <textarea class="w-100 f3 ph3 h-100 bb" :placeholder="content.textPlaceholder" :value="content.text" onchange="newEntry.changeContent('text', this.value)">
                </textarea>
            </div>
        </div>
        
        <div id="dash" v-if="display" v-cloak>
            <input type="text" id="newJournalName" placeholder="journalname">
            <button onclick="newJournal(document.getElementById('newJournalName').value)">Create new journal</button>
            
            <br /><br />
            <input type="text" id="noteid" placeholder="noteid"><br />
            <input type="text" id="notename" placeholder="notename"><br />
            <input type="text" id="journalid" placeholder="journalid">
            <button onclick="addNoteToJournal(document.getElementById('noteid').value,document.getElementById('notename').value, document.getElementById('journalid').value)">Add note ID to journal</button>
            
            <br /><br /><br />
            
            <div class="f3 w-100">
                <a href="/journals" class="no-underline ora b">Recent Journals</a>
                <i class="fas fa-plus ora fr pa2 pointer" @click="showJournalModal = true; showNoteModal = false;"></i>
                <hr />
            </div>
            
            <div class="flex flex-wrap">
                <journal-overview v-for="(notes, journalname) in journals"
                    v-bind:notes="notes"
                    v-bind:journalname="journalname">
                </journal-overview>
            </div>
            
            <br />
            
            <div class="f3 w-100">
                <a href="/notes" class="no-underline ora b">Recent Notes</a>
                <i class="fas fa-plus ora fr click pa2 pointer" @click="showNoteModal = true; showJournalModal = false;"></i>
                <hr />
            </div>
            
            <ul class="list pl0">
                <note-overview v-for="(note, noteid) in notes"
                    v-bind:noteid="noteid"
                    v-bind:note="note">
                </note-overview>
            </ul>
            
            <modal id="journalModal" v-if="showJournalModal" @close="showJournalModal = false">
                <h3 slot="header">JOURNAL STUFF!</h3>
            </modal>
            
            <modal id="noteModal" v-if="showNoteModal" @close="showNoteModal = false">
                <h3 slot="header">NOTE STUFF!!!</h3>
            </modal>
        </div>
        
        <div id="push" class="push" v-if="display"></div>
        
        <div id="settings" v-if="display" v-cloak>
            <div class="outline red pv2 ph3" onclick="signOut()">
                <span class="f2">Logout</span><i class="fas fa-sign-out-alt fa-2x fr mt1"></i>
            </div>
        </div>
    </div>

    <article class="footer ph2 pb3 fixed left-0 bottom-0 right-0 mid-gray f4" id="footer">
        <div class="flex justify-center f5 mb4" id="nav">
            <span class="bl tc w-30 pt3 pb2 bt bb dim" v-bind:class="{'oraborder': tabs === 'new'}" @click="nav.change('new')">
            <i class="fas fa-sticky-note fa-2x" v-bind:class="{'ora': tabs === 'new'}"></i>
            </span>
            
            <span class="tc w-30 pt3 pb2 bt bb dim" v-bind:class="{'oraborder': tabs === 'dash'}" @click="nav.change('dash')">
            <i class="fas fa-home fa-2x" v-bind:class="{'ora': tabs === 'dash'}"></i>
            </span>
            
            <span class="br tc w-30 pt3 pb2 bt bb dim" v-bind:class="{'oraborder': tabs === 'settings'}" @click="nav.change('settings')">
            <i class="fas fa-user-cog fa-2x" v-bind:class="{'ora': tabs === 'settings'}"></i>
            </span>
        </div>
    </article>

    <script src="https://kit.fontawesome.com/afa150793f.js" crossorigin="anonymous"></script>

    <script src="/js/firebase-app.js"></script>
    <script src="/js/firebase-auth.js"></script>
    <script src="/js/firebase-database.js"></script>

    <script>
        const firebaseConfig = {
         apiKey: "AIzaSyDVnVkuM-Q5gQuZ8vdCU2g58PF2Mg5poNo",
         authDomain: "carolum-301eb.firebaseapp.com",
         databaseURL: "https://carolum-301eb.firebaseio.com",
         projectId: "carolum-301eb",
         storageBucket: "carolum-301eb.appspot.com",
         messagingSenderId: "710478813831",
        };
        firebase.initializeApp(firebaseConfig);

    </script>

    <script src="/js/secure.js"></script>
    <script src="/js/dbinteract.js"></script>
    <script src="/js/index.js"></script>
</body>
</html>